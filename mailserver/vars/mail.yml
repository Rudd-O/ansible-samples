---
unix_users:
  - name: james
    gecos: James Bond
    password_unencrypted: password
    password: $5$h/passwordpasswordpassword/password.
    addresses:
#        - james@domain.com is tacit
    - aliastojames@domain.com
    - james@bond.name
  - name: john
    gecos: John the Ripper role account
#         addresses:
#        - john@domain.com is tacit
    password: $9$YWpasswordpasswordpassword/password/
forwardings:
  - name: notalist@domain.com
    addresses:
    - james@domain.com
    - john@hotmail.com
  - name: shawna@goody.com
    addresses:
    - shawna@gmail.com
mail:
  hostname: mailserver.domain.com
  domain: domain.com
  origin: domain.com
  destination_domains:
  - mailserver.domain.com
  - domain.com
  - bond.name
  message_size_limit: '{{ 60 * 1024 * 1024 }}'
  mailbox_size_limit: '{{ 1024 * 1024 * 1024 }}'
dkim:
  # You must list every domain you will be sending mail as
  # in this list.

  # Deploy your key files locally in the Ansible master node
  # within folder files/secrets/dkim, relative to the
  # ../role-mailserver.yml file.  For each domain that you
  # list here, you have to run the following shell script
  # within that `dkim` directory:
  #
  # DOMAIN=<type your domain here>
  # mkdir $DOMAIN
  # opendkim-genkey -D $DOMAIN -d $DOMAIN -s default -b 2048
  #
  # That process will create the necessary keys.
  # Note that you will have to have the program `opendkim-genkey`
  # installed on the Ansible master node, which is available
  # within the opendkim package.
  #
  # After you have generated the necessary keys, you must
  # publish the contents of the private.txt file (in each
  # key subdirectory) via DNS, following the DNS portion
  # of the guide here:
  # https://support.dnsimple.com/articles/dkim-record/
  # Otherwise mail servers will mark your outgoing e-mails
  # from these domains as improperly signed by DKIM.
  - domain.com
  - bond.name
ssl:
  # You must list the keys for the mail server here.
  #
  # The certificate domain name must match the domain
  # name of the server in mail.hostname, which should
  # also be the same name below.
  #
  # Deploy your key files locally in the Ansible master node
  # within folder files/secrets/tls, relative to the
  # ../role-mailserver.yml file.  Edit these variables
  # to fit the file names of your keys.
  # The followig key mailserver.domain.com must match the
  # `mail.hostname` variable defined in this file.  If you
  # alter it here, alter it there too.
  mailserver.domain.com:
    key:           '{{ lookup("file", "secrets/mailserver.domain.com.key") }}'
    intermediates:
    # The order matters.  At the bottom of the stack must be the one closest to the root of trust.
    - /etc/pki/tls/certs/CABUNDLE.crt
    certificate:   '{{ lookup("file", "secrets/mailserver_domain_com.crt") }}'
    assembled:     '{{ lookup("file", "secrets/assembled_mailserver.domain.com.crt") }}'
